(function(){function e(e){return-1!=e.text().toLowerCase().indexOf("anonymous")}function t(){var t=[],n=$("span[data-user-id]");n.each(function(){e($(this))||t.push($(this).attr("data-user-id"))});var o="https://www.coursera.org";"spark.dev-coursera.org"==window.location.hostname&&(o="https://site.dev-coursera.org");var a=o+"/maestro/api/user/profiles?user-ids="+t.join(",");$.ajax({url:a,dataType:"jsonp",type:"get",success:r})}function n(e){return e.replace(/^http:\/\//i,"https://")}function r(t){$.each(t,function(t,r){var o=$('span[data-user-id="'+r.id+'"]');o.each(function(){var t=$(this);if(!e(t)){var o=$('<a href="https://www.coursera.org/user/i/'+r.external_id+'"></a>');o.append(r.display_name);var a=(t.attr("title")||"")+(t.find("span").attr("title")||"");if(a&&o.attr("title",a),t.attr("data-user-title")&&"Student"!=t.attr("data-user-title")){var i=$("<span>"+t.attr("data-user-title")+"</span>");i.css({padding:"1px 3px 2px","font-size":"10px","font-weight":"bold","text-transform":"uppercase",background:"#ebbc4c",margin:"0px 4px 0px 6px"}),o.append(i)}if(r.photo_24){var s=$('<img src="'+n(r.photo_24)+'">');s.css({width:"24px",height:"24px","vertical-align":"bottom","margin-right":"5px",border:"1px solid #CCC"}),o.prepend(s)}t.empty().append(o)}})})}$(document).ready(function(){t()})})();